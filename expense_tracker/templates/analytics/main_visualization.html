<h2>Spending Analysis</h2>
<label for="view-select">Select View:</label>
<select id="view-select">
    <option value="daily">Daily</option>
    <option value="monthly">Monthly</option>
    <option value="yearly">Yearly</option>
</select>

<!-- Container for the chart -->
<div id="chart-container"></div>

<script>
    document.getElementById('view-select').addEventListener('change', function() {
        const view = this.value;
        if (view === 'daily') {
            loadDailyView();
        } else if (view === 'monthly') {
            loadMonthlyView();
        } else if (view === 'yearly') {
            loadYearlyView();
        }
    });

    function loadDailyView() {
        fetch("{% url 'daily_expenses_by_category' %}")
            .then(response => response.text())
            .then(html => document.getElementById('chart-container').innerHTML = html);
    }

    function loadMonthlyView() {
        fetch("{% url 'daily_expenses_in_month' %}")
            .then(response => response.text())
            .then(html => document.getElementById('chart-container').innerHTML = html);
    }

    function loadYearlyView() {
        fetch("{% url 'monthly_expenses_in_year' %}")
            .then(response => response.text())
            .then(html => document.getElementById('chart-container').innerHTML = html);
    }

    // Load daily view by default
    loadDailyView();
</script>